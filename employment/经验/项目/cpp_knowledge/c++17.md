[TOC]



## 1.进程，线程，协程

**进程**

> 进程是什么？

代码经过编译编程可执行文件之后装载到内存，`cpu`执行程序中的指令，那么这个运行中的程序我们称为**进程**。

当面对多个任务时，进程的处理方式有两种：**并发**和**并行**。进程的基本状态至少有三种：**运行，就绪，阻塞**。

> 那么如何查看任务在哪个进程，进程中具体有什么呢

答案是`PCB`，即**进程控制块**。PCB时进程存在的唯一标识，其中包含进程描述信息，进程控制信息，资源分配清单，`cpu`相关信息等以便进程根号的运行。不同的`PCB`之间通过**链表**组织，便于增删改，同时相同状态的进程会一起形成**队列**。



**线程**

当在一个进程中，不同的步骤可以并发运行，并且共享相同的地址空间时，可以建立新的实体——**线程**。线程也就是进程中的一条执行流程。

数据段，代码段，打开的文件等资源共享，但是每个线程拥有独立的寄存器和栈，保证线程的控制流相对独立。



- 进程是资源分配的基本单位，线程是`cpu`调度的单位。



**协程**

协程是一种可以暂停执行以便稍后恢复的函数。

协程是无堆栈的：它们通过返回给调用者来暂停执行，并且恢复执行所需的数据与堆栈分开存储。这允许异步执行顺序代码（例如，无需显式回调即可处理非阻塞 I/O），并且还支持惰性计算无限序列的算法和其他用途。



**参考资料**：

1.[c++20协程入门 - 南山烟雨珠江潮](https://zhuanlan.zhihu.com/p/59178345)

2.[图解操作系统 - 小林coding](https://xiaolincoding.com/os/4_process/process_base.html)

3.[corountine - cppreference.](https://en.cppreference.com/w/cpp/language/coroutines)

4.[一篇文章搞懂 C++ 20 协程 Coroutine](https://www.cnblogs.com/blizzard8204/p/17563217.html)



## 2.leveldbslice和C++17string_view



string_view：字符串字面量，只有一个指针和长度，操作少且快，性能比较好。

string：有指针，大小，容量，缓冲区等，占用大量空间